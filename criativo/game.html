<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Saira+Semi+Condensed:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <title>AVIATOR</title>

    <link rel="stylesheet" href="../css/style.css">

</head>

<body>
    <!-- <header>
        <nav>
            <ul>
                <li>
                    <img src="../assets/foto perfil.png" alt="Foto de perfil">
                </li>
                <li>
                    <h2>Renato Lino</h2>
                </li>
                <li>
                    <span class="circle"></span>
                </li>
            </ul>
        </nav>
    </header> -->
    <div style="display: flex;justify-content: center;margin-top: 2em;">
        <img src="../assets/logo.png" style="height: 70px;" alt="">
    </div>
    <article>
        <p class="title" id="title"></p>
        <div class="primary">
            <div class="bar">
                <span id="aviator_bar"></span>
                <img id="aviator_image" src="../assets/avitor.png" alt="">
            </div>
            <div class="buttons">
                <button id="btn_ia" class="btn-success">ATIVAR I.A</button>
                <button class="btn-primary"><span id="btn_peoples"></span> ONLINE</button>
            </div>
            <div class="time" id="time">
                <h1 id="time_text"></h1>
                <h3>Segundos</h3>
            </div>
            <div class="active_button" id="active_button">
                <span id="active_button_bar"></span>
                <h3 id="active_button_text">Iniciar contagem</h3>
            </div>
        </div>
        <div id="iframe-main">
            <div class="sub">
                <p style="text-align: center;padding-bottom: 2em;color: #7a7a7a;">CassinoPix connected</p>
                <iframe id="item-iframe-main"
                    src="https://player-vz-730ba405-d4e.tv.pandavideo.com.br/embed/?v=901e8a1b-44d0-4e66-bff5-20cd9639bbcf"
                    width="100%" height="100%" fetchpriority="high"></iframe>
            </div>
        </div>
    </article>
    <div id="navbar">
        <ul>
            <li>
                <a href="./index.html">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="50" height="50">
                        <path
                            d="M23.121,9.069,15.536,1.483a5.008,5.008,0,0,0-7.072,0L.879,9.069A2.978,2.978,0,0,0,0,11.19v9.817a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V11.19A2.978,2.978,0,0,0,23.121,9.069ZM15,22.007H9V18.073a3,3,0,0,1,6,0Zm7-1a1,1,0,0,1-1,1H17V18.073a5,5,0,0,0-10,0v3.934H3a1,1,0,0,1-1-1V11.19a1.008,1.008,0,0,1,.293-.707L9.878,2.9a3.008,3.008,0,0,1,4.244,0l7.585,7.586A1.008,1.008,0,0,1,22,11.19Z" />
                    </svg>
                    <p>Home</p>
                </a>
            </li>
            <li class="active">
                <a href="./game.html">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"
                        width="50" height="50">
                        <path d="M10.874,3A4,4,0,0,0,3.126,3H0V5H3.126a4,4,0,0,0,7.748,0H24V3Z" />
                        <path d="M17,8a4,4,0,0,0-3.874,3H0v2H13.126a4,4,0,0,0,7.748,0H24V11H20.874A4,4,0,0,0,17,8Z" />
                        <path d="M7,16a4,4,0,0,0-3.874,3H0v2H3.126a4,4,0,0,0,7.748,0H24V19H10.874A4,4,0,0,0,7,16Z" />
                    </svg>

                    <p>Jogar</p>
                </a>
            </li>
            <li>
                <a href="./index.html">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                        id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;"
                        xml:space="preserve" width="50" height="50">
                        <path
                            d="M470.549,111.573L313.237,36.629c-34.628-20.684-77.728-21.051-112.704-0.96L41.451,111.573  c-0.597,0.299-1.216,0.619-1.792,0.96c-37.752,21.586-50.858,69.689-29.272,107.441c7.317,12.798,18.08,23.284,31.064,30.266  l43.883,20.907V375.68c0.026,46.743,30.441,88.039,75.072,101.931c31.059,8.985,63.264,13.384,95.595,13.056  c32.326,0.362,64.531-4,95.595-12.949c44.631-13.891,75.046-55.188,75.072-101.931V271.104l42.667-20.395v175.957  c0,11.782,9.551,21.333,21.333,21.333c11.782,0,21.333-9.551,21.333-21.333v-256C512.143,145.615,492.363,122.473,470.549,111.573z   M384,375.787c0.011,27.959-18.129,52.69-44.8,61.077c-27.046,7.728-55.073,11.479-83.2,11.136  c-28.127,0.343-56.154-3.408-83.2-11.136c-26.671-8.388-44.811-33.118-44.8-61.077v-84.309l70.763,33.707  c17.46,10.368,37.401,15.816,57.707,15.765c19.328,0.137,38.331-4.98,54.976-14.805L384,291.477V375.787z M452.267,211.733  l-160.896,76.8c-22.434,13.063-50.241,12.693-72.32-0.96l-157.419-74.88c-17.547-9.462-24.101-31.357-14.639-48.903  c3.2-5.934,7.998-10.853,13.85-14.201l159.893-76.373c22.441-13.034,50.233-12.665,72.32,0.96l157.312,74.944  c11.569,6.424,18.807,18.555,18.965,31.787C469.354,193.441,462.9,205.097,452.267,211.733L452.267,211.733z" />
                    </svg>
                    <p>Academy</p>
                </a>
            </li>
            <li>
                <a href="./classes.html">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"
                        width="50" height="50">
                        <path
                            d="M17,10.039c-3.859,0-7,3.14-7,7,0,3.838,3.141,6.961,7,6.961s7-3.14,7-7c0-3.838-3.141-6.961-7-6.961Zm0,11.961c-2.757,0-5-2.226-5-4.961,0-2.757,2.243-5,5-5s5,2.226,5,4.961c0,2.757-2.243,5-5,5Zm1.707-4.707c.391,.391,.391,1.023,0,1.414-.195,.195-.451,.293-.707,.293s-.512-.098-.707-.293l-1-1c-.188-.188-.293-.442-.293-.707v-2c0-.552,.447-1,1-1s1,.448,1,1v1.586l.707,.707Zm5.293-10.293v2c0,.552-.447,1-1,1s-1-.448-1-1v-2c0-1.654-1.346-3-3-3H5c-1.654,0-3,1.346-3,3v1H11c.552,0,1,.448,1,1s-.448,1-1,1H2v9c0,1.654,1.346,3,3,3h4c.552,0,1,.448,1,1s-.448,1-1,1H5c-2.757,0-5-2.243-5-5V7C0,4.243,2.243,2,5,2h1V1c0-.552,.448-1,1-1s1,.448,1,1v1h8V1c0-.552,.447-1,1-1s1,.448,1,1v1h1c2.757,0,5,2.243,5,5Z" />
                    </svg>

                    <p>Lives</p>
                </a>
            </li>
            <!-- <li>
                <a href="./telegram.html">
                    <img src="../assets/ICONE-RANKING.svg" alt="">
                    <p>Raking</p>
                </a>
            </li> -->
        </ul>
    </div>
</body>
<script>
    // ACTIVE IA
    const title = document.getElementById("title");
    const list_progress_times = localStorage.getItem("aviator-times") ? localStorage.getItem("aviator-times").split(",").map(item => parseInt(item)) : [];
    const list_progress_iframes = localStorage.getItem("aviator-iframes") ? localStorage.getItem("aviator-iframes").split(",") : [];
    let current_time = 0;
    const time = document.getElementById("time");
    const active_button = document.getElementById("active_button");
    const btn_ia = document.getElementById('btn_ia');

    title.innerHTML = "Ative a ferramenta para descobrir os segundos da próxima vela";

    let time_active = false;
    let active_porcent = 0;
    let btn_ia_click = false;
    let time_selected = 0;
    let iframe_selected = "";

    const velocity = 45;

    time.style.display = "none";
    active_button.style.display = "none";

    btn_ia.addEventListener("click", () => {
        if (!btn_ia_click) {
            title.innerHTML = "Analizando últimas 1.000.000 de velas..."
            btn_ia.innerHTML = `I.A ATIVADA`;
            btn_ia_click = true;
            btn_ia.classList.remove("btn-success");
            btn_ia.classList.add("btn-disabled");
            barLoad();
        }
    });

    const barLoad = () => {
        setTimeout(() => {
            if (active_porcent <= 100) {
                active_porcent++;
                addLoad(active_porcent);
                barLoad()
            } else {
                title.innerHTML = "Duração da próxima vela encontrada";
                activeTime();
            }
        }, velocity)
    }

    const addLoad = (porcent) => {
        document.getElementById("aviator_image").style.left = `${porcent - 5}%`;
        document.getElementById("aviator_bar").style.width = `${porcent}%`;
    }

    const getTime = () => {
        if (list_progress_times.length) {
            time_selected = list_progress_times[current_time];
            iframe_selected = list_progress_iframes[current_time];
            if (list_progress_times[current_time + 1]) {
                current_time++;
            } else {
                current_time = 0;
            }
        } else {
            time_selected = getRandomInt(1, 60);
            iframe_selected = "https://player-vz-730ba405-d4e.tv.pandavideo.com.br/embed/?v=901e8a1b-44d0-4e66-bff5-20cd9639bbcf"
        }
    }

    const activeTime = () => {
        getTime();
        const time_text = document.getElementById("time_text");
        const item_iframe_main = document.getElementById("item-iframe-main");

        time.style.display = "flex";
        active_button.style.display = "flex";

        time_text.innerHTML = time_selected;
        item_iframe_main.src = iframe_selected;

        console.log(item_iframe_main.getElementsByClassName("selector"))
        item_iframe_main.getElementsByClassName("selector")[0].click();

        title.innerHTML = "Ative a ferramenta para descobrir os segundos da próxima vela";
    }

    addLoad(active_porcent);

</script>
<script>
    // TIME
    let btn_ia_click2 = false;

    const resetAll = () => {
        time_active = false;
        active_porcent = 0;
        btn_ia_click = false;
        time_selected = 0;

        document.getElementById("active_button_bar").style.width = "0";
        document.getElementById("time_text").innerHTML = 0;
        document.getElementById("aviator_image").style.left = "-5%";
        document.getElementById("aviator_bar").style.width = "0%";

        btn_ia.classList.add("btn-success");
        btn_ia.classList.remove("btn-disabled");
        time.style.display = "none";
        active_button.style.display = "none";
        btn_ia_click2 = false;
        btn_ia.innerHTML = "ATIVAR I.A";

        document.getElementById("active_button_text").innerHTML = "INICIAR CONTAGEM";

        title.innerHTML = "Ative a ferramenta para descobrir os segundos da próxima vela";
    }


    document.getElementById("active_button").addEventListener("click", () => {
        if (!btn_ia_click2) {
            document.getElementById("active_button_text").innerHTML = "CONTAGEM INICIADA";
            btn_ia_click2 = true;
            const interval = 10;
            const increment = interval / (time_selected * 1000) * 100;
            let timeRemaining = time_selected;
            let width = 0;

            const progressInterval = setInterval(function () {
                width += increment;
                timeRemaining -= interval / 1000;

                if (width >= 100) {
                    width = 100;
                    timeRemaining = 0;
                    clearInterval(progressInterval);
                    resetAll();
                } else {
                    addLoadInTime(width, timeRemaining.toFixed(0))
                }
            }, interval);
        }
    });

    const addLoadInTime = (porcent, count) => {
        document.getElementById("active_button_bar").style.width = `${porcent}%`;
        document.getElementById("time_text").innerHTML = count;
    }
</script>
<script>
    // PEOPLES ONLINE
    let quant_peoples = getRandomInt(1941, 2140);

    setInterval(() => {
        loadQuantPeoples(1, 5);
        addPeoples(quant_peoples)
    }, 1000 * 10);

    setInterval(() => {
        loadQuantPeoples(1, 2);
        addPeoples(quant_peoples)
    }, 1000 * 5);

    addPeoples(quant_peoples)

    function loadQuantPeoples(min, max) {
        const numberGenerate = getRandomInt(min, max);
        const sinal = getRandomInt(0, 1);
        if (sinal) {
            quant_peoples += numberGenerate;
        } else {
            quant_peoples -= numberGenerate;
        }
    }

    function addPeoples(quant) {
        const btn_peoples = document.getElementById('btn_peoples');
        btn_peoples.innerHTML = quant;
    }

    function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
</script>

</html>